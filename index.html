<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>my-private-space</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
<style>
:root {
  --glass-bg: rgba(255,255,255,0.1);
  --glass-blur: 30px;
  --primary-color: #5e5ce6;
  --accent-color: #ff6b6b;
  --text-color: #fff;
  --panel-radius: 36px;
  --notif-color: #5e5ce6;
  --transition-speed: 0.4s;
}

* { box-sizing:border-box; margin:0; padding:0; font-family:'Roboto',sans-serif; }

body {
  background: url('assets/chihiro036.jpeg') center/cover no-repeat;
  color: var(--text-color);
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  border-radius: var(--panel-radius);
  padding: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
  color:#fff;
  display:flex;
  flex-direction:column;
  gap:12px;
  min-width:220px;
  transition: all var(--transition-speed) ease;
}

/* Panels */ .container { display:flex; flex-wrap:wrap; justify-content:center; align-items:center; gap:20px; } 
  .panel-left, .panel-right { display:flex; flex-direction:column; gap:12px; } 
  .panel-left div, .panel-right div { display:flex; align-items:center; gap:10px; font-weight:500; } 
  .panel-left div span.icon, .panel-right div span.icon { font-size:1.4rem; color:#fff; }

/* Center */
.center { display:flex; flex-direction:column; align-items:center; gap:20px; }
#time { font-size:120px; font-weight:700; }
.date { font-size:24px; opacity:0.85; }

/* Dynamic Island / Pomodoro */
#dynamicIsland {
  position: relative;
  width:180px;
  height:180px;
  border-radius:90px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  box-shadow: 0 10px 40px rgba(0,0,0,0.25);
  transition: transform 0.3s ease, opacity 0.4s ease;
}

#dynamicIsland.pulse { animation: pulseIsland 1.5s infinite alternate; }
@keyframes pulseIsland {
  0% { transform: scale(0.98); }
  50% { transform: scale(1.03); }
  100% { transform: scale(0.98); }
}

#dynamicIsland canvas { position:absolute; top:0; left:0; width:100%; height:100%; border-radius:90px; }
#dynamicIslandTime { font-size:1.5rem; font-weight:600; z-index:2; }

/* Pomodoro Controls */
#pomControlsIsland { display:flex; gap:10px; margin-top:20px; flex-wrap:wrap; justify-content:center; transition: opacity 0.3s ease; }
button { padding:6px 12px; border:none; border-radius:12px; cursor:pointer; font-weight:500; }
#pomStartBtn { background: var(--primary-color); color:#fff; }
#pomPauseBtn { background: var(--accent-color); color:#fff; display:none; }
#pomResetBtn { background:#444; color:#fff; display:none; }

/* Notification */
#notification { position:fixed; bottom:30px; right:30px; background: var(--notif-color); color:#fff; padding:14px 24px; border-radius:28px; opacity:0; transform:translateY(20px); transition: all 0.4s ease; font-weight:500; z-index:100; }
#notification.show { opacity:1; transform:translateY(0); }

/* Ticker */
.bottom { position:fixed; bottom:10px; width:100%; display:flex; flex-direction:column; align-items:center; gap:4px; }
.ticker { white-space: nowrap; overflow: hidden; width:80vw; text-align:left; position: relative; border-radius: 12px; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding:6px 12px; }
.tickerContent { display:inline-block; padding-left:100%; animation:tickerScroll 20s linear infinite; }
@keyframes tickerScroll { 0%{ transform: translateX(0);} 100%{ transform: translateX(-100%);} }
.footer { font-size:0.8rem; opacity:0.6; text-align:center; }

/* Media */
@media(max-width:600px){
  #time{font-size:70px;}
  .date{font-size:18px;}
  #dynamicIsland{width:140px;height:140px;}
  #pomControlsIsland{margin-top:150px;}
}
</style>
</head>
<body>

<div class="container">
  <!-- Crypto -->
  <div class="glass panel-left" id="infoPanel">
    <div><span class="material-icons-outlined icon">currency_bitcoin</span><span id="btc">BTC: ...</span></div>
    <div><span class="material-icons-outlined icon">token</span><span id="eth">ETH: ...</span></div>
    <div><span class="material-icons-outlined icon">currency_exchange</span><span id="pi">PI: ...</span></div>
    <div><span class="material-icons-outlined icon">paid</span><span id="usdt">USDT: ...</span></div>
  </div>
</div>

  <!-- Center -->
  <div class="center">
    <div id="time">00:00</div>
    <div id="date" class="date">-- -- ----</div>

    <div id="dynamicIsland">
      <canvas id="pomCanvas"></canvas>
      <div id="dynamicIslandTime">25:00</div>
    </div>

    <div id="pomControlsIsland">
      <input type="number" id="pomCustomTime" placeholder="Min" style="width:60px; text-align:center; border:none; border-radius:12px; padding:4px 6px;">
      <button id="pomStartBtn">Start</button>
      <button id="pomPauseBtn">Pause</button>
      <button id="pomResetBtn">Reset</button>
    </div>
  </div>

  <!-- Weather -->
  <div class="glass panel-right" id="weatherPanel">
    <div><span class="material-icons-outlined icon">cloud</span><span id="temp">--¬∞C</span></div>
    <div><span class="material-icons-outlined icon">water_drop</span><span id="humidity">Humidity: --%</span></div>
    <div><span class="material-icons-outlined icon">waves</span><span id="dew">Dew: --¬∞C</span></div>
    <div><span class="material-icons-outlined icon">air</span><span id="wind">Wind: -- km/h</span></div>
    <div><span class="material-icons-outlined icon">speed</span><span id="pressure">Pressure: -- hPa</span></div>
  </div>
</div>

<div class="bottom">
  <div class="glass ticker">
    <div class="tickerContent">Welcome back, Ruben. Stay curious üí´</div>
  </div>
  <div class="footer">üêæ Magic Mirror | Powered by oneko.js</div>
</div>

<div id="notification">Pomodoro finished! ‚è∞</div>
<audio id="notifSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto"></audio>

   <!-- Oneko Cat -->
 <script src="https://cdn.jsdelivr.net/gh/adryd325/oneko.js/oneko.js" data-cat="https://cdn.jsdelivr.net/gh/adryd325/oneko.js/oneko.gif"></script>
<script>
// --- Time ---
function updateTime(){
  const now=new Date();
  document.getElementById('time').textContent=now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit',hour12:false});
  document.getElementById('date').textContent=now.toLocaleDateString([], {weekday:'short', month:'short', day:'numeric', year:'numeric'});
}
setInterval(updateTime,1000); updateTime();

let previousPrices = {};

async function fetchCrypto() {
  try {
    const res = await fetch(
      "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,pi-network,tether&vs_currencies=usd"
    );
    const data = await res.json();

    function updateElement(id, newValue, symbol = "$") {
      const el = document.getElementById(id);
      const oldValue = previousPrices[id];
      let arrow = "";

      if (oldValue !== undefined && !isNaN(oldValue)) {
        if (newValue > oldValue) arrow = " ‚ñ≤";
        else if (newValue < oldValue) arrow = " ‚ñº";
      }

      // Add animation + color
      el.classList.remove("price-up", "price-down");
      if (arrow === " ‚ñ≤") el.classList.add("price-up");
      if (arrow === " ‚ñº") el.classList.add("price-down");

      el.textContent = `${id.toUpperCase()}: ${symbol}${newValue.toLocaleString()}${arrow}`;
      previousPrices[id] = newValue;
    }

    // Update each crypto
    updateElement("btc", data.bitcoin.usd);
    updateElement("eth", data.ethereum.usd);
    if (data["pi-network"] && data["pi-network"].usd != null)
      updateElement("pi", data["pi-network"].usd);
    else
      document.getElementById("pi").textContent = "PI: N/A";
    updateElement("usdt", data.tether.usd);

  } catch (e) {
    console.error("Fetch error:", e);
    ["btc", "eth", "pi", "usdt"].forEach(id => {
      document.getElementById(id).textContent = id.toUpperCase() + ": Error";
    });
  }
}

// Initial fetch
fetchCrypto();
// Update every 30 seconds
setInterval(fetchCrypto, 30000);

// --- Weather ---
const WEATHER_API_KEY="d81009d2cbae458bbdb51509251210"; const CITY="Lalitpur";
async function fetchWeather(){
  try{
    const res=await fetch(`https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${CITY}`);
    const data=await res.json();
    document.getElementById('temp').textContent=data.current.temp_c.toFixed(1)+"¬∞C";
    document.getElementById('humidity').textContent="Humidity: "+data.current.humidity+"%";
    document.getElementById('dew').textContent="Dew: "+data.current.dewpoint_c.toFixed(1)+"¬∞C";
    document.getElementById('wind').textContent="Wind: "+data.current.wind_kph+" km/h";
    document.getElementById('pressure').textContent="Pressure: "+data.current.pressure_mb+" hPa";
  }catch(e){console.error(e);}
}
fetchWeather(); setInterval(fetchWeather,1800000);

// --- Pomodoro ---
const canvas=document.getElementById('pomCanvas'); const ctx=canvas.getContext('2d');
const pomDisplay=document.getElementById('dynamicIslandTime');
const dynamicIsland=document.getElementById('dynamicIsland');

let pomTotal=25*60, pomTime=pomTotal, pomInterval=null, isPaused=false;

function resizeCanvas(){ canvas.width=canvas.offsetWidth; canvas.height=canvas.offsetHeight; }
resizeCanvas(); window.addEventListener('resize',resizeCanvas);

function drawPom(){
  const w=canvas.width,h=canvas.height,cx=w/2,cy=h/2,r=w/2-12;
  ctx.clearRect(0,0,w,h);
  ctx.beginPath(); ctx.arc(cx,cy,r,0,2*Math.PI);
  ctx.strokeStyle="rgba(255,255,255,0.1)"; ctx.lineWidth=12; ctx.stroke();

  const grad=ctx.createConicGradient(-Math.PI/2,cx,cy);
  grad.addColorStop(0,'#5e5ce6'); grad.addColorStop(0.33,'#ff6b6b'); grad.addColorStop(0.66,'#5e5ce6'); grad.addColorStop(1,'#5e5ce6');

  ctx.beginPath();
  const progress=1-(pomTime/pomTotal);
  ctx.arc(cx,cy,r,-Math.PI/2,-Math.PI/2+2*Math.PI*progress);
  ctx.strokeStyle=grad; ctx.lineWidth=12; ctx.lineCap='round'; ctx.stroke();

  requestAnimationFrame(drawPom);
}
drawPom();

function updatePomDisplay(){
  const m=Math.floor(pomTime/60), s=pomTime%60;
  pomDisplay.textContent=`${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
}

function startPom(){
  const val=parseInt(document.getElementById('pomCustomTime').value);
  if(val>0){ pomTotal=val*60; pomTime=pomTotal; updatePomDisplay(); }
  dynamicIsland.classList.add('pulse');
  document.getElementById('pomStartBtn').style.display='none';
  document.getElementById('pomPauseBtn').style.display='inline-block';
  document.getElementById('pomResetBtn').style.display='inline-block';
  if(pomInterval) return;
  pomInterval=setInterval(()=>{
    if(!isPaused){
      pomTime--;
      updatePomDisplay();
      if(pomTime<0){ clearInterval(pomInterval); pomInterval=null; pomTime=pomTotal; dynamicIsland.classList.remove('pulse'); showNotification(); updatePomDisplay(); document.getElementById('pomStartBtn').style.display='inline-block'; document.getElementById('pomPauseBtn').style.display='none'; }
    }
  },1000);
}

function pausePom(){
  isPaused=!isPaused;
  document.getElementById('pomPauseBtn').textContent=isPaused?'Resume':'Pause';
  if(isPaused){ dynamicIsland.classList.remove('pulse'); } else { dynamicIsland.classList.add('pulse'); }
}

function resetPom(){
  clearInterval(pomInterval); pomInterval=null; pomTime=pomTotal; isPaused=false; updatePomDisplay();
  dynamicIsland.classList.remove('pulse');
  document.getElementById('pomPauseBtn').textContent='Pause';
  document.getElementById('pomStartBtn').style.display='inline-block';
  document.getElementById('pomPauseBtn').style.display='none';
  document.getElementById('pomResetBtn').style.display='none';
}

document.getElementById('pomStartBtn').addEventListener('click',startPom);
document.getElementById('pomPauseBtn').addEventListener('click',pausePom);
document.getElementById('pomResetBtn').addEventListener('click',resetPom);

// --- Notification ---
function showNotification(){
  const notif=document.getElementById('notification');
  notif.classList.add('show');
  document.getElementById('notifSound').play();
  setTimeout(()=>notif.classList.remove('show'),3500);
}
</script>
</body>
</html>
